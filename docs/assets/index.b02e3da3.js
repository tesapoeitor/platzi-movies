const I=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}};I();const D="d3af6df373f8c9e5c2f6ee8f208b7429",d=document.querySelector("#header"),y=document.querySelector("#trendingPreview"),p=document.querySelector("#categoriesPreview"),r=document.querySelector("#genericList"),w=document.querySelector("#movieDetail"),L=document.querySelector("#liked"),S=document.querySelector("#searchForm"),_=document.querySelector(".trendingPreview-movieList"),B=document.querySelector(".categoriesPreview-list"),x=document.querySelector("#movieDetail .categories-list"),k=document.querySelector(".relatedMovies-scrollContainer"),H=document.querySelector(".liked-movieList"),M=document.querySelector(".header-title"),v=document.querySelector(".header-arrow"),h=document.querySelector(".header-title--categoryView"),E=document.querySelector("#searchForm input"),z=document.querySelector("#searchBtn"),$=document.querySelector(".trendingPreview-btn"),A=document.querySelector(".movieDetail-title"),N=document.querySelector(".movieDetail-description"),O=document.querySelector(".movieDetail-score"),c={num:1};let u;$.addEventListener("click",()=>{location.hash="#trends"});z.addEventListener("click",t=>(location.hash="#search="+E.value,t.preventDefault(),!1));v.addEventListener("click",()=>{E.value="",history.back(),location.hash="#home"});window.addEventListener("DOMContentLoaded",P,!1);window.addEventListener("hashchange",P,!1);window.addEventListener("scroll",u,!1);function P(){u&&(window.removeEventListener("scroll",u,{passive:!1}),u=void 0),location.hash.startsWith("#trends")?W():location.hash.startsWith("#search=")?R():location.hash.startsWith("#movie=")?U():location.hash.startsWith("#category=")?J():F(),document.documentElement.scrollTop=0,document.body.scrollTop=0,k.scrollLeft=0,u&&window.addEventListener("scroll",u,{passive:!0})}function F(){console.log("Home!"),d.classList.remove("header-container--long"),d.style.background="",v.classList.add("inactive"),M.classList.remove("inactive"),h.classList.add("inactive"),S.classList.remove("inactive"),y.classList.remove("inactive"),p.classList.remove("inactive"),localStorage.getItem("liked-movies")!=null&&localStorage.getItem("liked-movies")!="{}"&&location.hash===""?L.classList.remove("inactive"):L.classList.add("inactive"),r.classList.add("inactive"),w.classList.add("inactive"),q(),V(),T(),c.num=1}function W(){console.log("Trends!"),d.classList.remove("header-container--long"),d.style.background="",v.classList.remove("header-arrow--white"),v.classList.remove("inactive"),M.classList.add("inactive"),h.classList.remove("inactive"),S.classList.add("inactive"),y.classList.add("inactive"),p.classList.add("inactive"),L.classList.add("inactive"),r.classList.remove("inactive"),w.classList.add("inactive"),h.innerHTML="Tendencias",Z(),u=ee}function R(){console.log("Search!"),d.classList.remove("header-container--long"),d.style.background="",v.classList.remove("header-arrow--white"),v.classList.remove("inactive"),M.classList.add("inactive"),h.classList.add("inactive"),S.classList.remove("inactive"),y.classList.add("inactive"),p.classList.add("inactive"),L.classList.add("inactive"),r.classList.remove("inactive"),w.classList.add("inactive");const[t,e]=location.hash.split("=");Q(e),u=X(e)}function U(){console.log("Movie!"),d.classList.add("header-container--long"),v.classList.add("header-arrow--white"),v.classList.remove("inactive"),M.classList.add("inactive"),h.classList.add("inactive"),S.classList.add("inactive"),y.classList.add("inactive"),p.classList.add("inactive"),L.classList.add("inactive"),r.classList.add("inactive"),w.classList.remove("inactive");const[t,e]=location.hash.split("=");te(e)}function J(){console.log("Category!"),d.classList.remove("header-container--long"),d.style.background="",v.classList.remove("header-arrow--white"),v.classList.remove("inactive"),M.classList.add("inactive"),h.classList.remove("inactive"),S.classList.add("inactive"),y.classList.add("inactive"),p.classList.add("inactive"),L.classList.add("inactive"),r.classList.remove("inactive"),w.classList.add("inactive");const[t,e]=location.hash.split("="),[i,a]=e.split("-");h.innerHTML=decodeURI(a),Y(i),u=G(i)}let f;const m=axios.create({baseURL:"https://api.themoviedb.org/3/",params:{api_key:D,language:"es-ES"}});function b(){const t=JSON.parse(localStorage.getItem("liked-movies"));let e;return t?e=t:e={},e}function K(t){const e=b();e[t.id]?e[t.id]=void 0:e[t.id]=t,localStorage.setItem("liked-movies",JSON.stringify(e)),q(),T(),localStorage.getItem("liked-movies")!=null&&localStorage.getItem("liked-movies")!="{}"&&location.hash===""?L.classList.remove("inactive"):L.classList.add("inactive")}const j=new IntersectionObserver(t=>{t.forEach(e=>{if(e.isIntersecting){const i=e.target.getAttribute("data-img");e.target.setAttribute("src",i)}})});async function q(){const{data:t}=await m.get("trending/movie/day"),e=t.results;console.log("trending",e),g(e,_,{lazyLoad:!0,clean:!0})}async function V(){const{data:t}=await m.get("genre/movie/list"),e=t.genres;console.log("categories",e),C(e,B)}async function Y(t){const{data:e}=await m.get("discover/movie",{params:{with_genres:t}}),i=e.results;f=e.total_pages,g(i,r,{lazyLoad:!0,clean:!0})}function G(t){return async function(){const{scrollTop:e,scrollHeight:i,clientHeight:a}=document.documentElement,s=e+a>=i-40,o=c.num<f;if(s&&o){c.num++,console.log("category page:",c.num);const{data:n}=await m.get("discover/movie",{params:{with_genres:t,page:c.num}}),l=n.results;g(l,r,{lazyLoad:!0,clean:!1})}}}async function Q(t){const{data:e}=await m.get("search/movie",{params:{query:t}}),i=e.results;f=e.total_pages,console.log(f),g(i,r,{lazyLoad:!0,clean:!0})}function X(t){return async function(){const{scrollTop:e,scrollHeight:i,clientHeight:a}=document.documentElement,s=e+a>=i-40,o=c.num<f;if(s&&o){c.num++,console.log("search page:",c.num);const{data:n}=await m.get("search/movie",{params:{query:t,page:c.num}}),l=n.results;g(l,r,{lazyLoad:!0,clean:!1})}}}async function Z(){const{data:t}=await m.get("trending/movie/day"),e=t.results;f=t.total_pages,console.log("trending",e),g(e,r,{lazyLoad:!0,clean:!0})}async function ee(){const{scrollTop:t,scrollHeight:e,clientHeight:i}=document.documentElement,a=t+i>=e-40,s=c.num<f;if(a&&s){c.num++,console.log(" trending page:",c.num);const{data:o}=await m.get("trending/movie/day",{params:{page:c.num}}),n=o.results;g(n,r,{lazyLoad:!0,clean:!1})}}async function te(t){const{data:e}=await m.get("movie/"+t),i=`https://image.tmdb.org/t/p/w500/${e.poster_path}`;d.style.background=`
    linear-gradient(180deg, rgba(0, 0, 0, 0.35) 19.27%, rgba(0, 0, 0, 0) 29.17%),
    url(${i})`;const a=e.release_date.split("-")[0];A.textContent=a?`${e.title} (${a})`:`${e.title}`,N.textContent=e.overview,O.textContent=e.vote_average.toFixed(1),console.log("Movie: ",e),C(e.genres,x),se(t)}async function se(t){const{data:e}=await m.get(`movie/${t}/similar`),i=e.results;console.log(i),g(i,k,{lazyLoad:!0,clean:!0})}function g(t,e,{lazyLoad:i=!1,clean:a=!0}){a&&(e.innerHTML=""),t.forEach(s=>{const o=document.createElement("div");o.classList.add("movie-container");const n=document.createElement("img");n.classList.add("movie-img"),n.setAttribute("alt",s.title),n.setAttribute(i?"data-img":"src",`https://image.tmdb.org/t/p/w300${s.poster_path}`),n.addEventListener("error",()=>{n.setAttribute("src","https://static.platzi.com/static/images/error/img404.png")}),n.addEventListener("click",()=>{location.hash="#movie="+s.id});const l=document.createElement("button");l.classList.add("movie-btn"),b()[s.id]?l.classList.add("movie-btn--liked"):l.classList.remove("movie-btn--liked"),l.addEventListener("click",()=>{l.classList.toggle("movie-btn--liked"),K(s)}),i&&j.observe(n),o.appendChild(n),o.appendChild(l),e==null||e.appendChild(o)})}function C(t,e){e.innerHTML="",t.forEach(i=>{const a=document.createElement("div");a.classList.add("category-container");const s=document.createElement("h3");s.classList.add("category-title"),s.setAttribute("id",`id${i.id}`),s.addEventListener("click",()=>{location.hash=`#category=${i.id}-${i.name}`});const o=document.createTextNode(i.name);s.appendChild(o),a.appendChild(s),e==null||e.appendChild(a)})}function T(){const t=b(),e=Object.values(t);g(e,H,{lazyLoad:!0,clean:!0})}
